<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Gif page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" media="screen" href="assets/Css/style.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="assets/Css/reset.css" />

    <script src="assets/Javascript/javascript.js"></script>
    <script src="http://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

    <style type="text/css">
        button,
        div,
        form,
        input {
            margin: 10px;
        }
    </style>

</head>

<body>

    <h1>Video Game Search</h1>
    <div id="buttons-view"></div>

    <form id="gif-form">
        <label for="gif-input">Add a Gif</label>
        <input type="text" id="gif-input">
        <br>

        <input id="add-gif" type="submit" value="Add a Gif">
    </form>


    <div id="gifs-appear-here"></div>


</body>

<script>
    var videoGameArr = ["halo 5", "gears of war", "bioshock", "god of war 4"];


    function displayVideoGameGifs() {
        $("button").on("click", function () {
            var videoGame = $(this).attr("data-name");


            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + videoGame + "&api_key=lokEXiRxZ9E2y5sZj1wWJM6ZN3oDmVuT&limit=10";

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                console.log("this is our queryURL", queryURL);

                var results = response.data;

                for (var i = 0; i < results.length; i++) {

                    var $videoGameDiv = $("<div>");

                    var $p = $("<p>").text("Rating: " + results[i].rating);

                    var $videoGameImg = $("<img>");

                    $videoGameImg.attr("src", results[i].images.fixed_height.url);

                    $videoGameDiv.append($p);
                    $videoGameDiv.append($videoGameImg);

                    $("#gifs-appear-here").prepend($videoGameDiv);
                }

            });
        });
    };

    function renderButtons() {

        $("#buttons-view").empty();

        for (var i = 0; i < videoGameArr.length; i++) {

            var a = $("<button>");

            a.addClass("vid-game-btn");

            a.attr("data-name", videoGameArr[i]);

            a.text(videoGameArr[i]);

            $("#buttons-view").append(a);
        }
    };


    $("#add-gif").on("click", function () {
        event.preventDefault();

        var $videoGame = $("#gif-input").val().trim();

        videoGameArr.push($videoGame);

        renderButtons();


    });

      $(document).on("click", ".vid-game-btn", displayVideoGameGifs);

      renderButtons();

</script>

</html>